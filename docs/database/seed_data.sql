-- =============================================
-- ТЕСТОВЫЕ ДАННЫЕ ДЛЯ "КАПСУЛЬНОГО ГАРДЕРОБА"
-- =============================================
-- =============================================
-- 1. ПОЛЬЗОВАТЕЛИ
-- =============================================

INSERT INTO Users (username, email, password_hash, avatar_url) VALUES
('anna_style', 'anna@example.com', 'hashed_password_1', 'avatars/anna.jpg'),
('max_fashion', 'max@example.com', 'hashed_password_2', 'avatars/max.jpg'),
('olga_minimalist', 'olga@example.com', 'hashed_password_3', NULL);

-- =============================================
-- 2. КАТЕГОРИИ ОДЕЖДЫ
-- =============================================

INSERT INTO Categories (name, type, description, icon_name) VALUES
('Футболка', 'верх', 'Базовые и повседневные футболки', 'tshirt'),
('Рубашка', 'верх', 'Офисные и casual рубашки', 'shirt'),
('Свитер', 'верх', 'Теплые свитера и джемперы', 'sweater'),
('Пиджак', 'верх', 'Пиджаки и блейзеры', 'blazer'),
('Пальто', 'верхняя одежда', 'Верхняя одежда для холодной погоды', 'coat'),
('Джинсы', 'низ', 'Джинсы различных фасонов', 'jeans'),
('Брюки', 'низ', 'Классические и casual брюки', 'pants'),
('Юбка', 'низ', 'Юбки различной длины', 'skirt'),
('Платье', 'верх', 'Платья для разных случаев', 'dress'),
('Кроссовки', 'обувь', 'Спортивная обувь', 'sneakers'),
('Туфли', 'обувь', 'Классическая обувь', 'shoes'),
('Сумка', 'аксессуары', 'Сумки и рюкзаки', 'bag'),
('Ремень', 'аксессуары', 'Кожаные и тканевые ремни', 'belt');

-- =============================================
-- 3. ЦВЕТА
-- =============================================

INSERT INTO Colors (name, hex_code, color_family) VALUES
('Черный', '#000000', 'нейтральные'),
('Белый', '#FFFFFF', 'нейтральные'),
('Серый', '#808080', 'нейтральные'),
('Бежевый', '#F5F5DC', 'нейтральные'),
('Синий', '#0000FF', 'холодные'),
('Темно-синий', '#00008B', 'холодные'),
('Голубой', '#87CEEB', 'холодные'),
('Красный', '#FF0000', 'теплые'),
('Бордовый', '#800000', 'теплые'),
('Зеленый', '#008000', 'холодные'),
('Оливковый', '#808000', 'теплые'),
('Желтый', '#FFFF00', 'теплые'),
('Коричневый', '#A52A2A', 'нейтральные'),
('Розовый', '#FFC0CB', 'теплые'),
('Фиолетовый', '#800080', 'холодные');

-- =============================================
-- 4. РАЗМЕРЫ
-- =============================================

INSERT INTO Sizes (size_system, value, category_id) VALUES
('RU', '44', 1),  -- Футболка
('RU', '46', 1),
('RU', '48', 1),
('RU', '42', 6),  -- Джинсы
('RU', '44', 6),
('RU', '46', 6),
('EU', '38', 9),  -- Платье
('EU', '40', 9),
('EU', '42', 9),
('US', '8', 10),  -- Кроссовки
('US', '9', 10),
('US', '10', 10),
('INT', 'M', 2),  -- Рубашка
('INT', 'L', 2),
('INT', 'XL', 2);

-- =============================================
-- 5. БРЕНДЫ
-- =============================================

INSERT INTO Brands (name, country, website) VALUES
('Zara', 'Испания', 'https://www.zara.com'),
('H&M', 'Швеция', 'https://www.hm.com'),
('Uniqlo', 'Япония', 'https://www.uniqlo.com'),
('Massimo Dutti', 'Испания', 'https://www.massimodutti.com'),
('COS', 'Швеция', 'https://www.cos.com'),
('Levi''s', 'США', 'https://www.levi.com'),
('Adidas', 'Германия', 'https://www.adidas.com'),
('Nike', 'США', 'https://www.nike.com');

-- =============================================
-- 6. СЕЗОНЫ
-- =============================================

INSERT INTO Seasons (name, description, icon_name) VALUES
('Лето', 'Легкая одежда для теплой погоды', 'sun'),
('Зима', 'Теплая одежда для холодной погоды', 'snowflake'),
('Весна', 'Демисезонная одежда', 'flower'),
('Осень', 'Демисезонная одежда', 'leaf'),
('Всесезонное', 'Подходит для любого времени года', 'calendar');

-- =============================================
-- 7. МАТЕРИАЛЫ
-- =============================================

INSERT INTO Materials (name, description, care_instructions, is_natural) VALUES
('Хлопок', 'Натуральная ткань', 'Стирка при 40°C, не отбеливать', 1),
('Лен', 'Натуральная ткань', 'Стирка при 30°C, сухая чистка', 1),
('Шерсть', 'Натуральный материал', 'Ручная стирка, сушка в расправленном виде', 1),
('Шелк', 'Натуральный материал', 'Только химчистка', 1),
('Полиэстер', 'Синтетическая ткань', 'Стирка при 40°C, не гладить', 0),
('Вискоза', 'Полусинтетическая ткань', 'Стирка при 30°C, не выжимать', 0),
('Джинса', 'Плотная хлопковая ткань', 'Стирка при 30°C, выворачивать наизнанку', 1),
('Кожа', 'Натуральный материал', 'Протирать влажной тряпкой, специальный уход', 1);

-- =============================================
-- 8. ПОВОДЫ/СОБЫТИЯ
-- =============================================

INSERT INTO Occasions (name, formality_level, description, icon_name) VALUES
('Офис', 4, 'Рабочая одежда', 'briefcase'),
('Повседневное', 2, 'Ежедневная носка', 'user'),
('Спорт', 1, 'Спортивная активность', 'dumbbell'),
('Вечеринка', 5, 'Вечерние мероприятия', 'glass-cheers'),
('Свидание', 4, 'Романтическая встреча', 'heart'),
('Прогулка', 2, 'Неформальные встречи', 'walking'),
('Учеба', 3, 'Учебное заведение', 'graduation-cap'),
('Путешествие', 2, 'Дорожная одежда', 'plane');

-- =============================================
-- 9. ПРЕДМЕТЫ ОДЕЖДЫ (для пользователя anna_style)
-- =============================================

-- Базовые вещи 
INSERT INTO ClothingItems (name, description, purchase_date, price, image_url, 
                          is_favorite, condition, storage_location, user_id, category_id, color_id, size_id, brand_id) VALUES
('Белая футболка', 'Базовый предмет гардероба', '2024-03-15', 1999.00, 'items/white_tshirt.jpg', 
 TRUE, 'отличное', 'Шкаф, полка 1', 1, 1, 2, 1, 3),
('Синие джинсы', 'Прямые джинсы', '2024-01-20', 5499.00, 'items/blue_jeans.jpg', 
 TRUE, 'хорошее', 'Шкаф, полка 2', 1, 6, 5, 5, 6),
('Черное платье', 'Маленькое черное платье', '2023-11-10', 8999.00, 'items/black_dress.jpg', 
 TRUE, 'отличное', 'Шкаф, вешалка 1', 1, 9, 1, 8, 1),
('Бежевый свитер', 'Теплый кашемировый свитер', '2023-12-05', 12999.00, 'items/beige_sweater.jpg', 
 FALSE, 'хорошее', 'Шкаф, полка 3', 1, 3, 4, 2, 4),
('Белые кроссовки', 'Универсальные кроссовки', '2024-02-28', 7999.00, 'items/white_sneakers.jpg', 
 TRUE, 'удовлетворительное', 'Прихожая', 1, 10, 2, 11, 7),
('Серая рубашка', 'Офисная рубашка', '2024-04-10', 3999.00, 'items/gray_shirt.jpg', 
 FALSE, 'отличное', 'Шкаф, вешалка 2', 1, 2, 3, 13, 2),
('Кожаная сумка', 'Повседневная сумка', '2023-09-15', 15999.00, 'items/leather_bag.jpg', 
 TRUE, 'хорошее', 'Полка для сумок', 1, 12, 13, NULL, NULL);

-- =============================================
-- 10. СВЯЗИ ПРЕДМЕТОВ И СЕЗОНОВ
-- =============================================

INSERT INTO ItemSeasons (item_id, season_id, priority) VALUES
(1, 1, 1),  -- Футболка - лето (основной)
(1, 4, 2),  -- Футболка - осень (второстепенный)
(2, 5, 1),  -- Джинсы - всесезонное
(3, 5, 1),  -- Платье - всесезонное
(4, 2, 1),  -- Свитер - зима
(4, 3, 2),  -- Свитер - весна
(4, 4, 2),  -- Свитер - осень
(5, 5, 1),  -- Кроссовки - всесезонное
(6, 5, 1),  -- Рубашка - всесезонное
(7, 5, 1);  -- Сумка - всесезонное

-- =============================================
-- 11. СВЯЗИ ПРЕДМЕТОВ И МАТЕРИАЛОВ
-- =============================================

INSERT INTO ItemMaterials (item_id, material_id, percentage) VALUES
(1, 1, 100),  -- Футболка: 100% хлопок
(2, 7, 98),   -- Джинсы: 98% хлопок
(2, 5, 2),    -- Джинсы: 2% эластан
(3, 1, 95),   -- Платье: 95% хлопок
(3, 5, 5),    -- Платье: 5% эластан
(4, 3, 100),  -- Свитер: 100% шерсть
(5, 5, 60),   -- Кроссовки: 60% полиэстер
(5, 1, 40),   -- Кроссовки: 40% хлопок
(6, 6, 100),  -- Рубашка: 100% вискоза
(7, 8, 100);  -- Сумка: 100% кожа

-- =============================================
-- 12. СВЯЗИ ПРЕДМЕТОВ И ПОВОДОВ
-- =============================================

INSERT INTO ItemOccasions (item_id, occasion_id, suitability_level) VALUES
(1, 2, 5),  -- Футболка: повседневное (5)
(1, 6, 4),  -- Футболка: прогулка (4)
(1, 8, 5),  -- Футболка: путешествие (5)
(2, 1, 3),  -- Джинсы: офис (3)
(2, 2, 5),  -- Джинсы: повседневное (5)
(2, 6, 5),  -- Джинсы: прогулка (5)
(3, 4, 5),  -- Платье: вечеринка (5)
(3, 5, 5),  -- Платье: свидание (5)
(4, 2, 4),  -- Свитер: повседневное (4)
(4, 6, 5),  -- Свитер: прогулка (5)
(5, 2, 5),  -- Кроссовки: повседневное (5)
(5, 3, 5),  -- Кроссовки: спорт (5)
(5, 6, 5),  -- Кроссовки: прогулка (5)
(6, 1, 5),  -- Рубашка: офис (5)
(6, 7, 4),  -- Рубашка: учеба (4)
(7, 2, 5),  -- Сумка: повседневное (5)
(7, 6, 5),  -- Сумка: прогулка (5)
(7, 8, 5);  -- Сумка: путешествие (5)

-- =============================================
-- 13. КОМПЛЕКТЫ ОДЕЖДЫ
-- =============================================

INSERT INTO Outfits (name, description, occasion_id, rating, weather_conditions, user_id) VALUES
('Офисный лук', 'Классический образ для работы', 1, 5, 'Ясно, +20°C', 1),
('Выходной день', 'Удобный casual образ', 2, 4, 'Облачно, +15°C', 1),
('Вечерний образ', 'Для вечеринки или свидания', 4, 5, 'Вечер, +18°C', 1);

-- =============================================
-- 14. СОСТАВ КОМПЛЕКТОВ
-- =============================================

INSERT INTO OutfitItems (outfit_id, item_id, item_order) VALUES
(1, 6, 1),  -- Офисный: рубашка
(1, 2, 2),  -- Офисный: джинсы
(1, 7, 3),  -- Офисный: сумка
(2, 1, 1),  -- Выходной: футболка
(2, 2, 2),  -- Выходной: джинсы
(2, 5, 3),  -- Выходной: кроссовки
(3, 3, 1),  -- Вечерний: платье
(3, 7, 2);  -- Вечерний: сумка

-- =============================================
-- 15. ИСТОРИЯ НОСКИ
-- =============================================

INSERT INTO WearHistory (item_id, outfit_id, wear_date, occasion_id, weather, rating, notes) VALUES
(1, 2, '2024-05-10', 6, 'Солнечно, +22°C', 5, 'Отлично подошло для прогулки'),
(2, 1, '2024-05-12', 1, 'Ясно, +20°C', 4, 'Комфортно в офисе'),
(5, 2, '2024-05-10', 6, 'Солнечно, +22°C', 5, 'Удобные кроссовки'),
(3, 3, '2024-05-15', 4, 'Вечер, +18°C', 5, 'Идеально для вечеринки'),
(6, 1, '2024-05-12', 1, 'Ясно, +20°C', 5, 'Хорошо выглядит с джинсами'),
(2, NULL, '2024-05-08', 2, 'Облачно, +16°C', 5, 'Повседневная носка');

-- =============================================
-- ПРОВЕРОЧНЫЕ ЗАПРОСЫ
-- =============================================

-- Показать количество предметов по категориям
SELECT c.name AS category, COUNT(ci.item_id) AS item_count
FROM Categories c
LEFT JOIN ClothingItems ci ON c.category_id = ci.category_id
WHERE ci.user_id = 1
GROUP BY c.name
ORDER BY item_count DESC;

-- Показать самые часто носимые предметы
SELECT ci.name AS item, ci.wear_count, c.name AS color
FROM ClothingItems ci
JOIN Colors c ON ci.color_id = c.color_id
WHERE ci.user_id = 1
ORDER BY ci.wear_count DESC
LIMIT 5;

-- Показать комплекты с их составом
SELECT o.name AS outfit, 
       GROUP_CONCAT(ci.name, ', ') AS items,
       oc.name AS occasion
FROM Outfits o
LEFT JOIN OutfitItems oi ON o.outfit_id = oi.outfit_id
LEFT JOIN ClothingItems ci ON oi.item_id = ci.item_id
LEFT JOIN Occasions oc ON o.occasion_id = oc.occasion_id
WHERE o.user_id = 1
GROUP BY o.outfit_id;

-- Проверить, какие вещи не носились более месяца
SELECT ci.name AS item, 
       ci.last_worn,
       julianday('now') - julianday(ci.last_worn) AS days_since_last_worn
FROM ClothingItems ci
WHERE ci.user_id = 1 
  AND ci.last_worn IS NOT NULL
  AND julianday('now') - julianday(ci.last_worn) > 30
ORDER BY days_since_last_worn DESC;
