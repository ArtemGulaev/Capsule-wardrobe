@startuml Add_Clothing_Item_Sequence
title –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞ –æ–¥–µ–∂–¥—ã

actor "üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å" as User
participant "üì± –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å" as UI
participant "üéÆ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä" as Controller
participant "üõ†Ô∏è –°–µ—Ä–≤–∏—Å –≥–∞—Ä–¥–µ—Ä–æ–±–∞" as WardrobeService
participant "üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö" as DB

User -> UI: –ù–∞–∂–∏–º–∞–µ—Ç "–î–æ–±–∞–≤–∏—Ç—å –≤–µ—â—å"
activate User
activate UI

UI -> UI: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
UI -> User: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É —Å –ø–æ–ª—è–º–∏:\n- –ù–∞–∑–≤–∞–Ω–∏–µ\n- –ö–∞—Ç–µ–≥–æ—Ä–∏—è\n- –¶–≤–µ—Ç\n- –°–µ–∑–æ–Ω\n- –§–æ—Ç–æ
deactivate UI

User -> UI: –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ
activate UI
UI -> Controller: POST /api/wardrobe/items\n{\n  "name": "–ë–µ–ª–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞",\n  "category_id": 1,\n  "color": "–±–µ–ª—ã–π",\n  "season": "–ª–µ—Ç–æ",\n  "image": "base64_data",\n  "user_id": 123\n}
activate Controller

Controller -> WardrobeService: createClothingItem(itemData)
activate WardrobeService

WardrobeService -> WardrobeService: validateItemData(itemData)
activate WardrobeService

alt –î–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–Ω—ã
  WardrobeService -> WardrobeService: processImage(itemData.image)
  WardrobeService -> WardrobeService: generateThumbnail(image)
  
  WardrobeService -> DB: INSERT INTO ClothingItems\n(name, category_id, color, season,\nimage_url, user_id, created_at)
  activate DB
  DB -> DB: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ storage
  DB -> WardrobeService: item_id = 456
  deactivate DB
  
  WardrobeService -> WardrobeService: updateUserStats(user_id)
  WardrobeService -> Controller: SuccessResponse({\n  item_id: 456,\n  message: "–ü—Ä–µ–¥–º–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω"\n})
  deactivate WardrobeService
  
  Controller -> UI: 201 Created\n{\n  "success": true,\n  "item_id": 456,\n  "message": "–í–µ—â—å —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞"\n}
  deactivate Controller
  
  UI -> UI: –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "‚úÖ –í–µ—â—å –¥–æ–±–∞–≤–ª–µ–Ω–∞"
  UI -> UI: –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≥–∞—Ä–¥–µ—Ä–æ–±–∞
  UI -> UI: –°–±—Ä–æ—Å–∏—Ç—å —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
  
  UI -> User: –ü–æ–∫–∞–∑–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—â—å –≤ —Å–ø–∏—Å–∫–µ\n—Å –º–∏–Ω–∏–∞—Ç—é—Ä–æ–π —Ñ–æ—Ç–æ
else –î–∞–Ω–Ω—ã–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã
  WardrobeService -> Controller: ErrorResponse({\n  code: "VALIDATION_ERROR",\n  details: ["–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ", "–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é"]\n})
  deactivate WardrobeService
  
  Controller -> UI: 400 Bad Request\n{\n  "success": false,\n  "errors": ["–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ", "–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é"]\n}
  deactivate Controller
  
  UI -> UI: –ü–æ–¥—Å–≤–µ—Ç–∏—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –ø–æ–ª—è
  UI -> User: –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏\n—Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏
end

deactivate UI
deactivate User
@enduml
